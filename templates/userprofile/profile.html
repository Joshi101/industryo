{% extends "base.html" %}

{% load staticfiles %}
{% load bootstrap %}

{% block title %} CoreLogs | {{ name }} {% endblock title %}

{% block left %}
	<div id="img_profile_box">
		<img id="img_profile" class="thumbnail" width="120" height="120" src="{{page_user.userprofile.get_profile_image}}"/>
		{% if page_user == user %}
		<a id='img_upload' class="text-center" data-toggle='modal' data-target='#img_upload_modal' href="#">Change Image</a>
		{% endif %}
	</div>
	<div class="account">
		<h4 class="acc_detail">{{ name }}</h4>
		<h4 class="acc_detail"><small class='small_mid'>( {{ page_user.userprofile.job_position }} )</small></h4>
		{% if page_user.userprofile.primary_workplace %}
		<h4 class="acc_detail"><a href="{% url "workplace:workplace_profile" page_user.userprofile.primary_workplace.slug %}" class="no_a">{{ page_user.userprofile.primary_workplace }}</a></h4>
		{% else %}
		<h4 class="acc_detail"><a href="{% url "set" %}" class="no_a">Set your Workplace</a></h4>
		{% endif %}
		<h5 class="acc_detail text-muted">{{page_user.userprofile.area}}</h5>
	</div>
	{% include "snippets/img_upload_modal.html" with url='nodes:set_profile_image' form=profile_image_form.image %}
{% endblock left %}

{% block content %}
  <ul class="nav nav-tabs">
    <li class="active"><a data-toggle="tab" href="#about">About</a></li>
    <li><a data-toggle="tab" href="#questions">Questions</a></li>
    <li><a data-toggle="tab" href="#answers">Answers</a></li>
    <li><a data-toggle="tab" href="#articles">Articles</a></li>
    <li><a data-toggle="tab" href="#feeds">Feeds</a></li>
  </ul>

  <div class="tab-content">
    <div id="about" class="tab-pane fade in active">
      <div class="panel panel-default ajax_andar ajax_papa">
				<div class="panel-heading">
					<h3 class="text-muted detail_head">
						Experience
						{% ifequal user request.user %}
						<form id="experience" class="pull-right" action="{% url 'user:set_experience' %}" method="POST">
							<button data-content="experience" data-save='' class="btn btn-default btn-xs detail_edit pull-right" name="">Edit</button>
						</form>
						{% endifequal %}
					</h3>
				</div>
				<div class="panel-body">
					<div class="detail_body content_experience">{{page_user.userprofile.experience}}</div>
					<textarea name="experience" form="experience" rows="3" class="form-control edit_experience hide"></textarea>
				</div>
			</div>

			<div class="panel panel-default ajax_andar ajax_papa">
				<div class="panel-heading">
					<h3 class="text-muted detail_head">
						Interests
						{% ifequal page_user request.user %}
						<button data-content="interest" data-save='' class="btn btn-default btn-xs detail_add pull-right" name="">Add</button>
						{% endifequal %}
					</h3>
					<form class="edit_interest hide" action="{% url 'user:set_interests' %}" method="POST" role="form">
		      	{% csrf_token %}
						<div class="d_search instant" data-results="instant">
							<input class="form-control d_input" data-search="tag" data-create="create" data-results="multiple" placeholder="Search for your interests here ...">
							<input type="hidden" name="value" class="instant_i">
							<input type="hidden" name="type" value="All">
							<button type="submit" class="form-ajax hide"></button>
							<div class="dropdown">
								<ul class="dropdown-menu d_list">
								</ul>
							</div>
							<div class="d_results"></div>
						</div>
					</form>
				</div>
				<div class="panel-body">
					<div class="detail_body">
						{% for interest in page_user.userprofile.get_interests %}
							{% include 'snippets/one_interest.html' with interest=interest %}
						{% endfor %}
					</div>
				</div>
			</div>
    </div>
    <div id="questions" class="tab-pane fade ajax_andar ajax_papa">
  		{% for question in questions %}
			{% include 'forum/one_question.html' with node=node %}
		{% endfor %}  
    </div>
    <div id="answers" class="tab-pane fade ajax_andar ajax_papa">
		{% for question in answers %}
			{% include 'forum/one_question.html' with node=node %}
		{% endfor %}
    </div>
    <div id="articles" class="tab-pane fade ajax_andar ajax_papa">
			{% for article in articles %}
				{% include 'nodes/one_article.html' with node=article %}
			{% endfor %}
	</div>
    <div id="feeds" class="tab-pane fade ajax_andar ajax_papa">
    	{% for node in feeds %}
				{% include 'nodes/one_node.html' with node=node %}
			{% endfor %}
    </div>
  </div>
{% endblock %}