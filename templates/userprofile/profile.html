{% extends "base.html" %}

{% load staticfiles %}
{% load bootstrap %}

{% load filter %}

{% block title %}{{ userprofile }} | CoreLogs{% endblock title %}

{% block meta_description %}{{page_user.userprofile.experience}}{% endblock meta_description %}

{% block left %}
	<div id="img_profile_box">
		<img id="img_profile" class="thumbnail" width="120" height="120" src="{{page_user.userprofile.get_profile_image}}" alt="CoreLogs_Profile-{{userprofile}}"/>
		{% if page_user == user %}
		<a id='img_upload' class="text-center" data-toggle='modal' data-target='#img_upload_modal' href="#">Change Image</a>
		{% endif %}
	</div>
	{% include "snippets/img_upload_modal.html" with url='nodes:set_profile_image' form=profile_image_form.image %}
{% endblock left %}

{% block content %}
	{% include "messages/new_modal.html" with url='messages:new' %}
	<div id="info_head" class="row info_head" typeof='Organization' resource='#workplace'>
    <div class="col-sm-8 info_left">
    	<header class="info_title">
      	<h2 class="text-uppercase" property='name'>{{ userprofile }}</h2>
			</header>
      <div class="info_field ajax_andar ajax_papa" property='location' typeof='PostalAddress'>
        <div class="info_field_value" property='addressRegion'>
			{% if userprofile.primary_workplace %}
			<h3 class="acc_detail"><a href="{% url "workplace:workplace_profile" userprofile.primary_workplace.slug %}" class="no_a">{{ userprofile.primary_workplace }}</a></h3>
			<h3 class="acc_detail"><small class='small_mid'>Working as: {{ page_user.userprofile.job_position }}</small></h3>
			{% else %}
				{% if page_user == request.user %}
				<h4 class="acc_detail"><a href="{% url "set" %}" class="no_a">Set your Workplace</a></h4>
				{% else %}
				<h4 class="acc_detail">No Workplace Defined</h4>
				{% endif %}
			{% endif %}
		</div>
      </div>
    </div>
    <div class="col-sm-4">
      <div class="info_labels">
        <span class="label label-default">{{userprofile.points}} points</span>
      </div>
			{% if user.is_authenticated %}
	  	<div class="info_labels" title="Send a message to {{userprofile}}" data-toggle="tooltip" data-placement="left">
	    	<a class="a_modal"><i class="fa fa-envelope fa-2x" data-toggle='modal' data-target='#msg_modal'></i></a>
	  	</div>
			{% endif %}
  	</div>
 </div>
  
  <ul class="nav nav-tabs">
    <li class="active"><a data-toggle="tab" href="#about">About</a></li>
    <li><a data-toggle="tab" href="#questions">Questions</a></li>
    <li><a data-toggle="tab" href="#answers">Answers</a></li>
    <li><a data-toggle="tab" href="#articles">Articles</a></li>
    <li><a data-toggle="tab" href="#feeds">Feeds</a></li>
  </ul>

  <div class="tab-content">
    <div id="about" class="tab-pane fade in active">
      <div class="panel panel-default ajax_andar ajax_papa">
				<div class="panel-heading">
					<h3 class="text-muted detail_head">
						Experience(A small Introduction)
						{% ifequal page_user request.user %}
						<form id="experience" class="pull-right" action="{% url 'user:set_experience' %}" method="POST">
							<button data-content="experience" data-save='' class="btn btn-default btn-xs detail_edit pull-right" name="">Edit</button>
						</form>
						{% endifequal %}
					</h3>
				</div>
				<div class="panel-body">
					<div class="detail_body content_experience">{{page_user.userprofile.experience}}</div>
					<textarea name="experience" form="experience" rows="3" class="form-control edit_experience hide"></textarea>
				</div>
			</div>

			<div class="panel panel-default ajax_andar ajax_papa">
				<div class="panel-heading">
					<h3 class="text-muted detail_head">
						Interests
						{% ifequal page_user request.user %}
						(Add your Engineering related intersts)
						<button data-content="interest" data-save='' class="btn btn-default btn-xs detail_add pull-right" name="">Add</button>
						{% endifequal %}
					</h3>
					
					<form class="edit_interest d_edit hide" action="{% url 'user:set_interests' %}" method="POST" role="form">
						{% csrf_token %}
						{% include "snippets/d_search_tags.html" with search="tag" type="All"  placeholder="Start typing your interest topics" %}
					</form>
				</div>
				<div class="panel-body">
					<div class="detail_body">
						{% for interest in page_user.userprofile.get_interests %}
							{% include 'snippets/one_interest.html' with interest=interest %}
						{% endfor %}
					</div>
				</div>
			</div>
    </div>
    <div id="questions" class="tab-pane fade ajax_andar ajax_papa">
  		{% for q in questions %}
			{% include 'forum/one_question.html' with q=q %}
		{% endfor %}  
    </div>
    <div id="answers" class="tab-pane fade ajax_andar ajax_papa">
		{% for a in answers %}
			{% include 'forum/one_question.html' with q=a %}
		{% endfor %}
    </div>
    <div id="articles" class="tab-pane fade ajax_andar ajax_papa">
			{% for article in articles %}
				{% include 'nodes/one_article.html' with node=article %}
			{% endfor %}
	</div>
    <div id="feeds" class="tab-pane fade ajax_andar ajax_papa">
    	{% for node in feeds %}
				{% include 'nodes/one_node.html' with node=node %}
			{% endfor %}
    </div>
  </div>
{% endblock %}